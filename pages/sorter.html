---
layout: default
category: archive
title: 乃木坂46 Sorter
---

<style>

  .tag-grid {
    justify-content: center;
    grid-template-columns: auto auto;
  }

  .button1 {
    margin-right: 10px;
  }

  .button2 {
    margin-left: 10px;
  }

  .button1, .tag-grid button {
    display: block;
    width: 200px;
    height: auto;
    margin: 20px auto;
    color: blue;
    font-family: "MS PGothic", "Courier", "Lucida Console", "Menlo Regular", "IBM Plex Mono", "Fira Code", "Fira Mono","Roboto Mono","Droid Sans Mono", Monaco, Consolas, Courier, monospace;;
    text-align: center;
    padding: 15px;
    transition-duration: 0.4s;
    overflow: hidden;
    border-color: blue;
    border-style: solid;
    border-width: thin;
    background-color: white;
    cursor: pointer;
  }
  
  .button1:hover, .tag-grid button:hover {
    border-style: 1px thin purple;
  }
  
  .names {
    clear: both;
    margin-top: 3em;
    margin-bottom: 1rem;
    color: black;
    margin-left: 30px;
  }
  
  </style>

<div class="leftcolumn">
  {% include profile-card.html %}
</div>

<div class="midcolumn">
  <div class="index-card">
    <br>
    <div class="side-card">
    </div>
    <br>
    <div class="tag-grid">
      <button id="start" onclick="startSorting()">Start Sorting</button>
      <button id="button1" onclick="choose(1)">Loading...</button>
      <button id="button2" onclick="choose(2)">Loading...</button>
      <button id="retry" style="display: none;" onclick="initialize()">Try Again</button>
    </div>

    <div id="names"></div>

    {% include license.html %}

    <script>
      var names = [
       "IOKI MAO", "IKEDA TERESA", "ICHINOSE MIKU", "INOUE NAGI",
      "OGAWA AYA", "OKUDA IROHA", "KAWASAKI SAKURA", "SUGAWARA SATSUKI", "TOMISATO NAO", "NAKANISHI ARUNO",
      "OKAMOTO HINA"
    ];
    // "ITO RIRIA", "IWAMOTO RENKA", "UMEZAWA MINAMI", "KUBO SHIORI", "SAKAGUCHI TAMAMI", "SATO KAEDE",
    // "NAKAMURA RENO","MUKAI HAZUKI", "YAMASHITA MIZUKI", "YOSHIDA AYANO CHRISTIE", "YODA YUKI",
    // "ENDO SAKURA", "KAKI HARUKA", "KANAGAWA SAYA", "KUROMI HARUKA",  "SATO RIKA", "SHIBATA YUNA",
    //  "SEIMIYA REI", "KAKEHASHI SAYAKA", "TAMURA MAYU",  "TSUTSUI AYAME", "HAYAKAWA SEIRA", "HAYASHI RUNA",
    //  "MATSUO MIYU", "YAKUBO MIO", "YUMIKI NAO",
    var comparisons = {};
  
  async function compare(name1, name2) {
    var key = name1 + '-' + name2;
    if (!comparisons[key]) {
      return new Promise((resolve) => {
        document.getElementById('button1').textContent = name1;
        document.getElementById('button2').textContent = name2;
        document.getElementById('button1').style.display = "block";
        document.getElementById('button2').style.display = "block";
        document.getElementById('button1').onclick = function() {
          comparisons[key] = name1;
          comparisons[name2 + '-' + name1] = name1;
          resolve(name1);
        }
        document.getElementById('button2').onclick = function() {
          comparisons[key] = name2;
          comparisons[name2 + '-' + name1] = name2;
          resolve(name2);
        }
      });
    } else {
      return Promise.resolve(comparisons[key]);
    }
  }
  
  async function mergeSort(arr) {
    if (arr.length < 2) return arr;
    var mid = Math.floor(arr.length / 2);
    var left = await mergeSort(arr.slice(0, mid));
    var right = await mergeSort(arr.slice(mid));
  
    var merged = [];
    while (left.length && right.length) {
      var winner = await compare(left[0], right[0]);
      if (winner === left[0]) {
        merged.push(left.shift());
      } else {
        merged.push(right.shift());
      }
    }
    
    return [...merged, ...left, ...right];
  }

  async function startSorting() {
    document.getElementById('start').style.display = "none";
    var sorted = await mergeSort(names);
    document.getElementById('names').innerHTML = sorted.map((name, index) => {
      return `${index + 1}. ${name}`;
    }).join("<br>");
    document.getElementById('retry').style.display = "block";
  }

  function initialize() {
    document.getElementById('start').style.display = "block";
    document.getElementById('button1').style.display = "none";
    document.getElementById('button2').style.display = "none";
    document.getElementById('retry').style.display = "none";
    document.getElementById('names').innerHTML = "";
    comparisons = {};

    // Fisher-Yates shuffle algorithm
    for (var i = names.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = names[i];
      names[i] = names[j];
      names[j] = temp;
    }
  }

  initialize();

  document.body.addEventListener('keydown', function (event) {
    if (event.key === 'a' || event.key === 'A') {
      document.getElementById('button1').onclick();
    } else if (event.key === 'd' || event.key === 'D') {
      document.getElementById('button2').onclick();
    }
  });

</script>