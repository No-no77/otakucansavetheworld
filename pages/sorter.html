---
layout: default
category: archive
title: 乃木坂46 Sorter
---

<style>

  .tag-grid {
    justify-content: center;
    grid-template-columns: auto auto;
  }

  .button1 {
    margin-right: 10px;
  }

  .button2 {
    margin-left: 10px;
  }

  .button1, .tag-grid button {
    display: block;
    width: 200px;
    height: auto;
    margin: 20px auto;
    color: blue;
    font-family: "MS PGothic", "Courier", "Lucida Console", "Menlo Regular", "IBM Plex Mono", "Fira Code", "Fira Mono","Roboto Mono","Droid Sans Mono", Monaco, Consolas, Courier, monospace;;
    text-align: center;
    padding: 15px;
    transition-duration: 0.4s;
    overflow: hidden;
    border-color: blue;
    border-style: solid;
    border-width: thin;
    background-color: white;
    cursor: pointer;
  }
  
  .button1:hover, .tag-grid button:hover {
    border-style: 1px thin purple;
  }
  
  .names {
    clear: both;
    margin-top: 3em;
    margin-bottom: 1rem;
    color: black;
    margin-left: 30px;
  }
  
  </style>

<div class="leftcolumn">
  {% include profile-card.html %}
</div>

<div class="midcolumn">
  <div class="index-card">
    <br>
    <div class="side-card">
    </div>
    <br>
    <div id="counter" style="font-weight: bold; margin: 10px 0;">0%</div>
    <div class="tag-grid">
      <button id="start" onclick="startSorting()">Start Sorting</button>
      <button id="button1" onclick="choose(1)">Loading...</button>
      <button id="button2" onclick="choose(2)">Loading...</button>
      <button id="retry" style="display: none;" onclick="initialize()">Try Again</button>
    </div>

    <div id="names"></div>

    {% include license.html %}

<script>
  var names = ["IOKI MAO", "IKEDA TERESA", "ICHINOSE MIKU", "INOUE NAGI",
    "OGAWA AYA", "OKUDA IROHA", "KAWASAKI SAKURA", "SUGAWARA SATSUKI", "TOMISATO NAO",
    "NAKANISHI ARUNO", "OKAMOTO HINA"];

    var comparisons = {};

function startSorting() {
    comparisons = {};
    document.getElementById('start').style.display = "none";
    askQuestion();
}

function askQuestion() {
    for (let i = 0; i < names.length; i++) {
        for (let j = i + 1; j < names.length; j++) {
            let key = `${names[i]}-${names[j]}`;
            let reverseKey = `${names[j]}-${names[i]}`;
            if (!comparisons[key] && !comparisons[reverseKey]) {
                // If we haven't decided this comparison yet
                showButtons(names[i], names[j]);
                return;
            }
        }
    }

    // If we've asked all questions, finish
    finishSorting();
}

function showButtons(name1, name2) {
    document.getElementById('button1').textContent = name1;
    document.getElementById('button1').onclick = function () {
        decideOrder(name1, name2);
    };

    document.getElementById('button2').textContent = name2;
    document.getElementById('button2').onclick = function () {
        decideOrder(name2, name1);
    };
}

function decideOrder(winner, loser) {
    comparisons[`${winner}-${loser}`] = true;
    propagateDecision(winner, loser);
    askQuestion();
}

function propagateDecision(winner, loser) {
    for (let i = 0; i < names.length; i++) {
        let otherName = names[i];
        if (otherName !== winner && otherName !== loser) {
            if (comparisons[`${winner}-${otherName}`]) {
                // If winner > otherName, then loser < otherName
                comparisons[`${loser}-${otherName}`] = true;
            }
            if (comparisons[`${otherName}-${winner}`]) {
                // If otherName < winner, then otherName < loser
                comparisons[`${otherName}-${loser}`] = true;
            }
        }
    }
}

function finishSorting() {
    // The sort algorithm using the comparisons data
    names.sort((a, b) => {
        if (comparisons[`${a}-${b}`]) return -1;
        if (comparisons[`${b}-${a}`]) return 1;
        return 0;
    });

    displayResults();
}

function displayResults() {
    var result = names.map((name, index) => {
        return `${index + 1}. ${name}`;
    }).join("<br>");
    document.getElementById('names').innerHTML = result;
}
